

<div class="container_info">

<%= form_for @draft, url: infos_path , method: :post do |f| %>

<%= render 'layouts/error_messages', model: f.object %>

  <div class="form-group">
    <%= f.text_field :title, placeholder: "タイトル (サイズは、見出し 1)" %>
    <%= f.text_field :language, placeholder: "言語" %>
  </div>
  <div class="form-group">

      <div id='editor'>
        <%= f.text_area :body, rows: 20, class: 'form-control', "v-model" => "input", name: "info[body]" %>
        <div v-html='input | marked' class="right_preview"></div>
      </div>
  </div>

  <div class="form-group row">
    <div class="col-md-2 offset-md-8">
      <%= f.hidden_field :commit, value:"下書き保存" %>
      <%= f.submit "下書き更新", class: "btn btn-primary" %>
    </div>
    <div class="col-md-2">
      <%= f.hidden_field :commit, value:"投稿する" %>
      <%= f.submit "投稿する", class: "btn btn-success" %>
    </div>
  </div>

<% end %>

</div>

<script type="text/javascript">
  window.onload = function() {
    marked.setOptions({breaks : true});
    new Vue({
      el: '#editor',
      data: {
        input: '<%= j @draft.body %>',
      },
      filters: {
        marked: marked,
      },
    });
  };
</script>